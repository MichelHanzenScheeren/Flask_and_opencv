{% extends '_layout.html' %}

{% block content %}
    <div class="row h-100 py-4 px-4 align-items-center justify-content-center">
        <div class="px-4 mb-2">
            <div class="row justify-content-between align-items-center mb-2">
                <img id="desenho" draggable="false" class="img-fluid rounded" {{ frame_controll["style"] }} src="{{ url_for('play_webcam') }}">
            </div>
            <div class="row justify-content-between align-items-center">
                <div class="col">
                    <label style="margin-bottom:0rem;">X1:</label>
                    <input id="x1" type="number" style="width:3em;" value="0" min="0">
                </div>
                <div class="col">
                    <label style="margin-bottom:0rem;">Y1:</label>
                    <input id="y1" type="number" style="width:3em;" value="0" min="0">
                </div>
                <div class="col">
                    <label style="margin-bottom:0rem;">X2:</label>
                    <input id="x2" type="number" style="width:3em;" value="0" min="0">
                </div>
                <div class="col">
                    <label style="margin-bottom:0rem;">Y2:</label>
                    <input id="y2" type="number" style="width:3em;" value="0" min="0">
                </div>
                <div class="col">
                    <button id="refresh_button" type="button" onclick="refresh_rectangle()" class="btn btn-outline-dark btn-sm btn-block">Atualizar</button>
                </div>
                <div class="col">
                    <button id="clear_button" type="button" onclick="clear_rectangle()" class="btn btn-outline-dark btn-sm btn-block">Limpar</button>
                </div>
            </div>
        </div>
        <div class="col-xl h-100 mb-2" style="min-height: 520px;">
            <div class="row h-100 align-items-top">
                <div class="col-md h-100 mx-2 border border-dark rounded p-3">
                    <form enctype="multipart/form-data">
                        <div class="custom-file">
                            <label class="custom-file-label" id="labelUploadImage" for="inputUploadImage">Escolher imagem local</label>
                            <input type="file" id="inputUploadImage" class="custom-file-input"accept="image/png,image/jpeg" multiple="false">
                        </div>
                    </form>
                    <button id="buttonGetDifferentiator" class="btn btn-md btn-block btn-dark text-white mt-2 mb-1">Obter diferenciador</button>
                    <label class="mt-2 mb-1 my-text">Dados obtidos:</label>
                    <div id="red" class="alert alert-danger alert-lg mb-2" role="alert">Aguardando...</div>
                    <div id="green" class="alert alert-success mb-2" role="alert">Aguardando...</div>
                    <div id="blue" class="alert alert-primary mb-1" role="alert"> Aguardando... </div>
                    <label class="mt-2 mb-2 my-text">Diferenciador:</label><br>
                    <div class="mx-1 row align-items-center justify-content-center">
                        <img id="differentiator_image" src="{{ url_for('static', filename='files/clock.jpg') }}" class="my-img" draggable="false">
                    </div>
                </div>
                <div class="col-md h-100 mx-2 border border-dark rounded ">
                    <h4 class="mt-3">Análise</h4>
                    <form action="start_analysis" method="POST">
                        <div class="form-row">
                            <div class="col form-group my-3">
                                <label for="time" class="control-label my-text-secondary">Tempo (seg)</label>
                                <input name="time" class="form-control" type="number" value="5" min="1"/>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col form-group my-2">
                                <label for="qtd" class="control-label my-text-secondary">Nº capturas/seg</label>
                                <input name="qtd" class="form-control" type="number" value="1" min="1"/>
                            </div>
                        </div>
                        <div class="form-row">
                            <div class="col form-group my-2">
                                <label for="description" class="control-label  my-text-secondary">Descrição (opcional)</label>
                                <textarea name="description" class="form-control my-textarea mb-3" maxlength="500" rows="5"></textarea>
                            </div>
                        </div>
                        <div id="div1">
                            <input disabled id="start" type="submit" value="INICIAR" onclick="config_analyze()" class="btn btn-lg btn-block btn-success">
                        </div>
                        <div id="div2" style="display:none">
                            <button type="button" disabled class="btn btn-lg btn-block btn-warning">
                                <span class="spinner-border spinner-border-lg" role="status" aria-hidden="true"></span>
                                &nbsp; ANALISANDO...
                            </button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </div>

{% endblock%}

{% block scripts %}
    <script type="">
        {% include 'src/rectangle.js' %}
        {% include 'src/load_image.js' %}
        {% include 'src/analyze.js' %}
    </script>
{% endblock%}

