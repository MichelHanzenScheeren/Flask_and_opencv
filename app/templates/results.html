{% extends '_layout.html' %}

{% block content %}
    <div class="container" id=results_content>
        <div id="sumary" class="mt-4">
            <h4 class="pl-3 bgc-fff">Informações Gerais</h4>
            <div class="container">
                <div class="row"> 
                    <div class="col-md card p-3 bg-white"> 
                        <h5 class="card-title"> Início da análise </h5> 
                        <p class="card-text"> {{ results.initial_date }} </p>
                    </div> 
                    <div class="col-md card p-3 bg-white"> 
                        <h5 class="card-title"> Tempo Total </h5> 
                        <p class="card-text"> {{ results.total_time }} segundos </p>
                    </div> 
                    <div class="col-md card p-3 bg-white"> 
                        <h5 class="card-title"> Nº Capturas </h5> 
                        <p class="card-text"> {{ results.captures_seg }} captura/seg </p>
                    </div>
                    <div class="col-md card p-3 bg-white"> 
                        <h5 class="card-title"> Total </h5> 
                        <p class="card-text"> {{ results.signals|length }} captura(s) </p>
                    </div>
                </div>
            </div>
        </div>
        <div id="differentiator_table" class="mt-4">
            <div class="panel-heading">
                <h4 class="pl-3">Diferenciador</h4>
            </div>
            <div class="panel-body">
                <table class="table table-hover table-bordered">
                    <thead class="table-dark"> 
                        <tr>
                            <th scope="col"> Vermelho </th>
                            <th scope="col"> Verde </th>
                            <th scope="col"> Azul </th> 
                        </tr>
                    </thead> 
                    <tbody class="bg-white">
                        <tr>
                            <td class="text-danger"> {{ results.differentiator[2]|round(3) }}</td>
                            <td class="text-success"> {{ results.differentiator[1]|round(3) }}</td>
                            <td class="text-info"> {{ results.differentiator[0]|round(3) }}</td>
                        </tr>
                    </tbody>
                </table> 
            </div>
        </div>
        <div id="sinais_table" class="mt-4">
            <div class="panel-heading">
                <h4 class="pl-3"> Capturas </h4>
            </div>
            <div class="table-responsive">
                <table class="table table-hover table-bordered">
                    <thead class="table-dark"> 
                        <tr>
                            <th scope="col"> Tempo (seg) </th>
                            <th scope="col"> Vermelho </th>
                            <th scope="col"> Verde </th>
                            <th scope="col"> Azul </th>
                            <th scope="col"> Sinal </th>
                        </tr>
                    </thead> 
                    <tbody class="bg-white">
                        {% for index in range(results.captures|length) %}
                            <tr>
                                <td class="text-black"> {{  (index * results.interval)|round(2) }}</td>
                                <td class="text-danger"> {{ results.captures[index][2]|round(3) }}</td>
                                <td class="text-success"> {{ results.captures[index][1]|round(3) }}</td>
                                <td class="text-info"> {{ results.captures[index][0]|round(3) }}</td>
                                <td class="text-black"> {{ results.signals[index]|round(3) }}</td>
                            </tr>
                        {% endfor %}
                    </tbody>
                </table> 
            </div>
        </div>
        <div class="mt-4">
            <div class="panel-heading">
                <h4 class="pl-3">Gráfico dos Sinais</h4>
            </div>
            <div id="line_chart"></div>
        </div>
        <div style="height: 50px;"></div>
    </div>
{% endblock%}

{% block scripts %}
    <script src="https://www.gstatic.com/charts/loader.js"></script>
    <script type="">
        var signals = {{ results.signals|tojson }};
        var interval = {{ results.interval|round(2) }};
        {% include 'src/signals_chart.js' %}
    </script>
{% endblock%}
